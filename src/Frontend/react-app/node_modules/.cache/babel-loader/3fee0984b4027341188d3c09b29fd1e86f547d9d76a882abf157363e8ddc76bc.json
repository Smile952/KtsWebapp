{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kheragacy\\\\source\\\\repos\\\\KtsWebApp\\\\KtsWebApp\\\\react-app\\\\src\\\\ts\\\\pages\\\\CheckAuth.tsx\",\n  _s = $RefreshSig$();\nimport { useLocation } from 'react-router-dom';\nimport { UnauthorizedPage } from './UnauthorizedPage';\nimport { synchronizeToken } from 'common/synchronizeToken';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function CheckAuth({\n  children,\n  accessLevel\n}) {\n  _s();\n  console.log(\"Checking autorization\");\n  const location = useLocation();\n  const role = localStorage.getItem('role');\n  const permission = role ? parseInt(role, 10) : -1;\n  const checkToken = async () => {\n    return await synchronizeToken();\n  };\n  if (!checkToken()) {\n    return /*#__PURE__*/_jsxDEV(UnauthorizedPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 16\n    }, this);\n  }\n  if (permission < accessLevel) {\n    return /*#__PURE__*/_jsxDEV(UnauthorizedPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 16\n    }, this);\n  }\n  return children;\n}\n_s(CheckAuth, \"pkHmaVRPskBaU4tMJuJJpV42k1I=\", false, function () {\n  return [useLocation];\n});\n_c = CheckAuth;\nvar _c;\n$RefreshReg$(_c, \"CheckAuth\");","map":{"version":3,"names":["useLocation","UnauthorizedPage","synchronizeToken","jsxDEV","_jsxDEV","CheckAuth","children","accessLevel","_s","console","log","location","role","localStorage","getItem","permission","parseInt","checkToken","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Kheragacy/source/repos/KtsWebApp/KtsWebApp/react-app/src/ts/pages/CheckAuth.tsx"],"sourcesContent":["import { ACCESS_LEVELS } from 'common/AccessLevels';\r\nimport { JSX } from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { UnauthorizedPage } from './UnauthorizedPage';\r\nimport { synchronizeToken } from 'common/synchronizeToken';\r\n\r\ninterface AuthProps {\r\n    children: JSX.Element,\r\n    accessLevel: number\r\n}\r\n\r\nexport function CheckAuth({ children, accessLevel }: AuthProps): JSX.Element {\r\n\r\n    console.log(\"Checking autorization\")\r\n    const location = useLocation();\r\n\r\n    const role = localStorage.getItem('role');\r\n\r\n    const permission = role ? parseInt(role, 10) : -1;\r\n    const checkToken = async () => {\r\n        return await synchronizeToken()\r\n    }\r\n    if (!checkToken()) {\r\n        return <UnauthorizedPage />;\r\n    }\r\n    if (permission < accessLevel) {\r\n        return <UnauthorizedPage />;\r\n    }\r\n\r\n    return children;\r\n}"],"mappings":";;AAEA,SAAmBA,WAAW,QAAQ,kBAAkB;AACxD,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,gBAAgB,QAAQ,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAO3D,OAAO,SAASC,SAASA,CAAC;EAAEC,QAAQ;EAAEC;AAAuB,CAAC,EAAe;EAAAC,EAAA;EAEzEC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;EACpC,MAAMC,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9B,MAAMY,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EAEzC,MAAMC,UAAU,GAAGH,IAAI,GAAGI,QAAQ,CAACJ,IAAI,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;EACjD,MAAMK,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC3B,OAAO,MAAMf,gBAAgB,CAAC,CAAC;EACnC,CAAC;EACD,IAAI,CAACe,UAAU,CAAC,CAAC,EAAE;IACf,oBAAOb,OAAA,CAACH,gBAAgB;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC/B;EACA,IAAIN,UAAU,GAAGR,WAAW,EAAE;IAC1B,oBAAOH,OAAA,CAACH,gBAAgB;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC/B;EAEA,OAAOf,QAAQ;AACnB;AAACE,EAAA,CAnBeH,SAAS;EAAA,QAGJL,WAAW;AAAA;AAAAsB,EAAA,GAHhBjB,SAAS;AAAA,IAAAiB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}