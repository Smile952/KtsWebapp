{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useForkRef from '@mui/utils/useForkRef';\nimport { useNullablePickerContext } from \"../useNullablePickerContext.js\";\nimport { useNullableFieldPrivateContext } from \"../useNullableFieldPrivateContext.js\";\n\n/**\n * Applies the default values to the field internal props.\n * This is a temporary hook that will be removed during a follow up when `useField` will receive the internal props without the defaults.\n * It is only here to allow the migration to be done in smaller steps.\n */\nexport function useFieldInternalPropsWithDefaults(parameters) {\n  const {\n    manager: {\n      internal_useApplyDefaultValuesToFieldInternalProps: useApplyDefaultValuesToFieldInternalProps\n    },\n    internalProps,\n    skipContextFieldRefAssignment\n  } = parameters;\n  const pickerContext = useNullablePickerContext();\n  const fieldPrivateContext = useNullableFieldPrivateContext();\n  const handleFieldRef = useForkRef(internalProps.unstableFieldRef, skipContextFieldRefAssignment ? null : fieldPrivateContext?.fieldRef);\n  const setValue = pickerContext?.setValue;\n  const handleChangeFromPicker = React.useCallback((newValue, ctx) => {\n    return setValue?.(newValue, {\n      validationError: ctx.validationError,\n      shouldClose: false\n    });\n  }, [setValue]);\n  const internalPropsWithDefaultsFromContext = React.useMemo(() => {\n    // If one of the context is null,\n    // Then the field is used as a standalone component and the other context will be null as well.\n    if (fieldPrivateContext != null && pickerContext != null) {\n      return _extends({\n        value: pickerContext.value,\n        onChange: handleChangeFromPicker,\n        timezone: pickerContext.timezone,\n        disabled: pickerContext.disabled,\n        readOnly: pickerContext.readOnly,\n        autoFocus: pickerContext.autoFocus && !pickerContext.open,\n        focused: pickerContext.open ? true : undefined,\n        format: pickerContext.fieldFormat,\n        formatDensity: fieldPrivateContext.formatDensity,\n        enableAccessibleFieldDOMStructure: fieldPrivateContext.enableAccessibleFieldDOMStructure,\n        selectedSections: fieldPrivateContext.selectedSections,\n        onSelectedSectionsChange: fieldPrivateContext.onSelectedSectionsChange,\n        unstableFieldRef: handleFieldRef\n      }, internalProps);\n    }\n    return internalProps;\n  }, [pickerContext, fieldPrivateContext, internalProps, handleChangeFromPicker, handleFieldRef]);\n  return useApplyDefaultValuesToFieldInternalProps(internalPropsWithDefaultsFromContext);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}