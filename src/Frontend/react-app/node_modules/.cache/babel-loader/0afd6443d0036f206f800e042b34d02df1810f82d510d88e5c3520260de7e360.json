{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kheragacy\\\\source\\\\repos\\\\KtsWebApp\\\\KtsWebApp\\\\react-app\\\\src\\\\common\\\\CheckAuth.tsx\";\nimport { UnauthorizedPage } from '../ts/pages/UnauthorizedPage';\nimport { synchronizeToken } from 'common/synchronizeToken';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function CheckAuth({\n  children,\n  accessLevel\n}) {\n  const role = localStorage.getItem('role');\n  const permission = role ? parseInt(role, 10) : -1;\n  const checkToken = async () => {\n    return await synchronizeToken();\n  };\n  if (!checkToken()) {\n    return /*#__PURE__*/_jsxDEV(UnauthorizedPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 16\n    }, this);\n  }\n  if (permission < accessLevel) {\n    return /*#__PURE__*/_jsxDEV(UnauthorizedPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 16\n    }, this);\n  }\n  return children;\n}\n_c = CheckAuth;\nvar _c;\n$RefreshReg$(_c, \"CheckAuth\");","map":{"version":3,"names":["UnauthorizedPage","synchronizeToken","jsxDEV","_jsxDEV","CheckAuth","children","accessLevel","role","localStorage","getItem","permission","parseInt","checkToken","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Kheragacy/source/repos/KtsWebApp/KtsWebApp/react-app/src/common/CheckAuth.tsx"],"sourcesContent":["import { JSX } from 'react';\r\nimport { UnauthorizedPage } from '../ts/pages/UnauthorizedPage';\r\nimport { synchronizeToken } from 'common/synchronizeToken';\r\n\r\ninterface AuthProps {\r\n    children: JSX.Element,\r\n    accessLevel: number\r\n}\r\n\r\nexport function CheckAuth({ children, accessLevel }: AuthProps): JSX.Element {\r\n\r\n    const role = localStorage.getItem('role');\r\n\r\n    const permission = role ? parseInt(role, 10) : -1;\r\n    const checkToken = async () => {\r\n        return await synchronizeToken()\r\n    }\r\n    if (!checkToken()) {\r\n        return <UnauthorizedPage />;\r\n    }\r\n    if (permission < accessLevel) {\r\n        return <UnauthorizedPage />;\r\n    }\r\n\r\n    return children;\r\n}"],"mappings":";AACA,SAASA,gBAAgB,QAAQ,8BAA8B;AAC/D,SAASC,gBAAgB,QAAQ,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAO3D,OAAO,SAASC,SAASA,CAAC;EAAEC,QAAQ;EAAEC;AAAuB,CAAC,EAAe;EAEzE,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EAEzC,MAAMC,UAAU,GAAGH,IAAI,GAAGI,QAAQ,CAACJ,IAAI,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;EACjD,MAAMK,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC3B,OAAO,MAAMX,gBAAgB,CAAC,CAAC;EACnC,CAAC;EACD,IAAI,CAACW,UAAU,CAAC,CAAC,EAAE;IACf,oBAAOT,OAAA,CAACH,gBAAgB;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC/B;EACA,IAAIN,UAAU,GAAGJ,WAAW,EAAE;IAC1B,oBAAOH,OAAA,CAACH,gBAAgB;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC/B;EAEA,OAAOX,QAAQ;AACnB;AAACY,EAAA,GAhBeb,SAAS;AAAA,IAAAa,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}