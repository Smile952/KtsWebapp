{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useLocation } from 'react-router-dom';\nexport function CheckAuth({\n  children,\n  accessLevel\n}) {\n  _s();\n  console.log(\"Checking autorization\");\n  const location = useLocation();\n  const role = localStorage.getItem('role');\n  const permission = role ? parseInt(role, 10) : -1;\n  // const checkToken = async () => {\n  //     return await synchronizeToken()\n  // }\n  // if (!checkToken()) {\n  //     return <UnauthorizedPage />;\n  // }\n  // if (permission < accessLevel) {\n  //     return <UnauthorizedPage />;\n  // }\n\n  return children;\n}\n_s(CheckAuth, \"pkHmaVRPskBaU4tMJuJJpV42k1I=\", false, function () {\n  return [useLocation];\n});\n_c = CheckAuth;\nvar _c;\n$RefreshReg$(_c, \"CheckAuth\");","map":{"version":3,"names":["useLocation","CheckAuth","children","accessLevel","_s","console","log","location","role","localStorage","getItem","permission","parseInt","_c","$RefreshReg$"],"sources":["C:/Users/Kheragacy/source/repos/KtsWebApp/KtsWebApp/react-app/src/ts/pages/CheckAuth.tsx"],"sourcesContent":["import { ACCESS_LEVELS } from 'common/AccessLevels';\r\nimport { JSX } from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { UnauthorizedPage } from './UnauthorizedPage';\r\nimport { synchronizeToken } from 'common/synchronizeToken';\r\n\r\ninterface AuthProps {\r\n    children: JSX.Element,\r\n    accessLevel: number\r\n}\r\n\r\nexport function CheckAuth({ children, accessLevel }: AuthProps): JSX.Element {\r\n\r\n    console.log(\"Checking autorization\")\r\n    const location = useLocation();\r\n\r\n    const role = localStorage.getItem('role');\r\n\r\n    const permission = role ? parseInt(role, 10) : -1;\r\n    // const checkToken = async () => {\r\n    //     return await synchronizeToken()\r\n    // }\r\n    // if (!checkToken()) {\r\n    //     return <UnauthorizedPage />;\r\n    // }\r\n    // if (permission < accessLevel) {\r\n    //     return <UnauthorizedPage />;\r\n    // }\r\n\r\n    return children;\r\n}"],"mappings":";AAEA,SAAmBA,WAAW,QAAQ,kBAAkB;AASxD,OAAO,SAASC,SAASA,CAAC;EAAEC,QAAQ;EAAEC;AAAuB,CAAC,EAAe;EAAAC,EAAA;EAEzEC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;EACpC,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAE9B,MAAMQ,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EAEzC,MAAMC,UAAU,GAAGH,IAAI,GAAGI,QAAQ,CAACJ,IAAI,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;EACjD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,OAAON,QAAQ;AACnB;AAACE,EAAA,CAnBeH,SAAS;EAAA,QAGJD,WAAW;AAAA;AAAAa,EAAA,GAHhBZ,SAAS;AAAA,IAAAY,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}