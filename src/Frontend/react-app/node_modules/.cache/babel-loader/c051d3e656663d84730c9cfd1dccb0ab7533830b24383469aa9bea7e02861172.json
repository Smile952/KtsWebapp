{"ast":null,"code":"import React,{useState}from'react';import{Button}from'../Button/Button';import'./Auth.css';import{getToken}from'./login';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function Auth(){const[error,setError]=useState(null);const nav=useNavigate();const updateClick=async event=>{setError(null);event.preventDefault();const form=event.currentTarget;const formData=new FormData(form);const formDataObject={};formData.forEach((value,key)=>{formDataObject[key]=value;});try{const tokenData=await getToken(formDataObject);if(tokenData){localStorage.setItem('token',tokenData['token']);localStorage.setItem('role',tokenData['role']);nav('/');}else{nav('/signup');}}catch(error){console.error('Error:',error);setError('Ошибка авторизации. Попробуйте снова.');}};return/*#__PURE__*/_jsx(\"div\",{className:`autorization ${error?'autorization-error':''}`,children:/*#__PURE__*/_jsx(\"div\",{className:\"autorization-back\",children:/*#__PURE__*/_jsx(\"div\",{className:\"autorization-form-block\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"autorization-form\",action:\"https://localhost:8080/api/users/token\",method:\"post\",onSubmit:updateClick,children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"autorization-input-block\",children:/*#__PURE__*/_jsx(\"input\",{className:`autorization-input ${error?'input-error':''}`,type:\"email\",name:\"email\",id:\"email\",required:true,placeholder:\"Email\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"autorization-input-block\",children:/*#__PURE__*/_jsx(\"input\",{className:`autorization-input ${error?'input-error':''}`,type:\"password\",name:\"password\",id:\"password\",required:true,placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"})}),/*#__PURE__*/_jsx(Button,{})]})})})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}