{"ast":null,"code":"import'./Admin.css';import{useState,useEffect}from'react';import{AdminRequests}from'./Requests/AdminRequests';import{AdminEmployees}from'./Employees/AdminEmployees';import{AdminUsers}from'./Users/AdminUsers';import{useNavigate}from'react-router-dom';import{TemporaryDrawer}from'./TemporaryDrawer';import{useSearchParams}from'react-router-dom';import{save}from'../minio_connection';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function Admin(){const[requestsContent,setRequestsContent]=useState([]);const[usersContent,setUsersContent]=useState([]);const[employeesContent,setEmployeesContent]=useState([]);const[sortDirection,setSortDirection]=useState();const[searchParams,setSearchParams]=useSearchParams();const nav=useNavigate();useEffect(()=>{console.log(searchParams.get('status'));// Запрос данных заявок\nAdminRequests({type:searchParams.get('type'),status:searchParams.get('status')}).then(result=>setRequestsContent(result)).catch(error=>{console.error('Error fetching admin requests:',error);});// Запрос данных сотрудников\nAdminEmployees().then(result=>setEmployeesContent(result)).catch(error=>{console.error('Error fetching admin employees:',error);});// Запрос данных пользователей\nAdminUsers().then(result=>setUsersContent(result)).catch(error=>{console.error('Error fetching admin users:',error);});},[searchParams]);const handler=(type,id,elem)=>{nav(`/admin/${type}/${id}`,{state:elem});};const redirectToCreateField=type=>{nav(`/admin/${type}/create`);};const requestSort=()=>{setRequestsContent([...requestsContent].sort((a,b)=>sortDirection===1?b.id-a.id:a.id-b.id));setSortDirection(sortDirection===1?0:1);};const usersSort=()=>{setUsersContent([...usersContent].sort((a,b)=>sortDirection===1?b.id-a.id:a.id-b.id));setSortDirection(sortDirection===1?0:1);};const employeesSort=()=>{setEmployeesContent([...employeesContent].sort((a,b)=>sortDirection===1?b.id-a.id:a.id-b.id));setSortDirection(sortDirection===1?0:1);};const saveImageButton=()=>{save();};return/*#__PURE__*/_jsx(\"div\",{className:\"admin\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content-lists\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-title\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-title-content\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"admin-title-text\",children:\"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-button-create\",onClick:()=>redirectToCreateField('order'),title:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443\",children:\"+\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-button-display\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin-button-display sort\",onClick:requestSort,children:\"sort\"}),/*#__PURE__*/_jsx(TemporaryDrawer,{})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-content-block\",children:requestsContent.map((request,index)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handler('order',request.id,request),className:\"admin-content-block-text\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0430 \\u043E\\u0442: \",request.userName]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0418\\u0441\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C: \",request.employeeName]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0422\\u0438\\u043F \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430: \",request.orderTypeId]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0421\\u043E\\u0434\\u0435\\u0440\\u0436\\u0438\\u043C\\u043E\\u0435: \",request.orderContent]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content-lists\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-title\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-title-content\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"admin-title-text\",children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-button-create\",onClick:()=>redirectToCreateField('user'),title:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443\",children:\"+\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-button-display\",children:/*#__PURE__*/_jsx(\"button\",{className:\"admin-button-display sort\",onClick:usersSort,children:\"sort\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-content-block\",children:usersContent.map((user,index)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handler(\"user\",user.id,user),className:\"admin-content-block-text\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0418\\u043C\\u044F: \",user.name]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Email: \",user.email]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442: \",user.age]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438: \",new Date(user.registrationDate).toLocaleDateString()]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content-lists\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-title\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-title-content\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"admin-title-text\",children:\"\\u0421\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-button-create\",onClick:()=>redirectToCreateField('employee'),title:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443\",children:\"+\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-button-display\",children:/*#__PURE__*/_jsx(\"button\",{className:\"admin-button-display sort\",onClick:employeesSort,children:\"sort\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-content-block\",children:employeesContent.map((emp,index)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handler(\"employee\",emp.id,emp),className:\"admin-content-block-text\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0418\\u043C\\u044F: \",emp.name]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C: \",/*#__PURE__*/_jsx(\"span\",{className:\"password\",children:\"[\\u0441\\u043A\\u0440\\u044B\\u0442\\u043E]\"})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0414\\u043E\\u043B\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C: \",emp.post]})]},index))})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}